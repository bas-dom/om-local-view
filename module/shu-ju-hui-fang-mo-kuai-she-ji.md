# 数据回放

### 1、功能需求。

数据回功能以页面为单位，能够根据时间间隔获取到历史某个时间的设备数据，并且呈现在页面上。

### 2、前段代码开发流程和内容

在页面的顶部需要一个数据回放按钮。点击后可以弹出配置模态框\(组件名：DataPlayBack\)。配置内容包括 采样间隔、时间范围。将时间范围保存到localStorage中\( localStorage.playbackRange" = { "startTime":"YY-MM-DD HH:mm:ss","endTime":"YY-MM-DD HH:mm:ss"} \)。在点击确认配置后，显示时间轴控制框\(组件名：TimeShaft\)，并且默认根据配置的开始时间的时间戳，请求对应的页面数据。点击时间轴上的时间间隔的时候,则可以根据选中的时间戳请求同一页面，不同时间的数据。并且可以选择自动播放功能。

### 3、后台代码开发流程和内容

后台编写/playback/get\_data接口根据前端post的页面id和时间戳获取到数据库中对应的页面数据（ {"data":{“点名1”:"点值1",“点名2”:"点值3",....}} ）。

### 4、页面和数据结构的关系

页面获取到接口中提供的数据。获取到的数据是当前页面某个时间戳所有的设备点值。页面根据字典内保存的点值，点名重新渲染页面。



